1) **Для отключения проверки на АНТИ-ФРОД** при взятии МЗ
Для метода  services/egov-bankinfo-ms/api/egov/v2/check-photo 
Целью реализации тоггла является отключение проверки пользователя при отправки заявки на МЗ и получения одобренного МЗ , для остальных продуктов данный тоггл не работает.  

Для проверки работы фича-тоггла ALWAYS_SUCCESS_FACE_CHECK необходимо перейти в Б/д **egov_bank_info** таблица **public.feature_toggles**.  

Тоггл работает только если поле **"reqType": "creditAccept"** либо **"reqType": "loanApplicationFormSend"**, для остальных значений данный тоггл не действует  
  
Данный тоггл при значении **true** отключает идентификацию лица:  
   
{  
    "data":
{         "images": null,         "similarity": 99.9,         "pinfl": "",         "base64": null,         "liveness": 1     }
,  
    "status":
{         "code": 200,         "message": "Always success"     }
,  
    "responseImageUrl": null,  
    "hashcode": "04e8c188-3ac7-463b-9e69-35a110646473_always_success"  
}

, а при **false** включает ее обратно:  

{  
    "data":
{         "images": null,         "similarity": 99.94281246,         "pinfl": "30101860000038",         "base64": "STORED IN S3",         "liveness": 1     }
,  
    "status":
{         "code": 200,         "message": "Anor bank: success"     }
,  
    "responseImageUrl": "egov-bucket:remote_identification/998990028183/50d6feb7-0172-4fdf-8751-62906e4467f3_response.jpeg",  
    "hashcode": "50be856a-1c30-48b2-97e3-9c140171dbaf_egov"  
}



2) **Для отключения экрана ввода карты пользователя при взятии кредита (СТАРЫЙ ФЛОУ)**

select * from products p where p.id = 120
product manual: "linkCard": false/true, // turn on/off card step in loan
false отключает шаг с картами ,  true  включает шаг с картами

{
"productName": "Быстрый микрозайм",
"processName": "FastMicroloanDbo",
"hasPackage":false,
"withPackage": null,
"linkCard": true,   //
"withoutPackage": 105
}

3) **Для отключения экрана ввода карты пользователя при взятии кредита (НОВЫЙ ФЛОУ)**

-- Turn on/off card step in microlon 
-- IS_ACTIVE = true (has add card step) 
-- IS_ACTIVE = false (has no add card step) 

select * from dynamic_forms df where df."type" = 'IS_ACTIVE'

Если включено то поля  | key  | value_uz | value_ru | должны быть true

| id  | type      | key      | value_uz | value_ru | value_en | order | regex | mandatory | parent_id | form_key  | visible | is_value | property |
| --- | --------- | -------- | -------- | -------- | -------- | ----- | ----- | --------- | --------- | --------- | ------- | -------- | -------- |
| 235 | IS_ACTIVE | isActive | false    | false    | false    | 6     |       | true      | 236       | MAIN_FORM | true    | false    |          |



--(similarity_ms_db) Для проверки задачи ECO-22 черный список терроризм
SELECT * from public.physicalpersons where fullname like 'Banderos Antonio Pedrovich'
SELECT * FROM public.physicalpersons WHERE id
DELETE from public.physicalpersons WHERE id = '1a1df843-2ad4-42bb-ab48-daa95f90d483'


--(forms_db_04042024) Для поиска заявки МЗ на одобрение
select * from form_agent fa where fa.client_id = '998900028183' order by fa.created_at desc


--(forms_db_04042024) Для проверики нового устройства а также времени подачи заявки
select * from feature_switch


-- (creditms) Для отключения/включения добавления карт при взятии МЗ СТАРЫЙ ФЛОУ
-- (creditms)old flow: product manual: "linkCard": false/true, // turn on/off card step in loan
select * from products p where p.id = 120


--(creditms) Для отключения/включения добавления карт при взятии МЗ НОВЫЙ ФЛОУ
select * from dynamic_forms df where df."type" = 'IS_ACTIVE'


--(egov_bank_info) отключение проверки лица при отправке заявки на МЗ
ALWAYS_SUCCESS_FACE_CHECK
SELECT * FROM feature_toggles


--(mbgw_db_test) Сделать устройство новым / 48 часов плашка
SELECT * FROM device WHERE login = '998909150770'


 --(forms_db_04042024) фича тоггл для крестика на банере статуса микрозайма (можно закрыть МЗ с крестика)
--IS_NEW_DEVICE - отключает/ включает проверку на новое устройство
--CREDIT_APPROVING_TIME - отключает/ включает проверку на одобрение кредита 1 час на скоринг
--OFFER_CLOSE_BUTTON_ENABLED -отключает/ включает крестик на банер одобренного кредита
SELECT * FROM feature_switch




WITH base AS ( SELECT * FROM client_form_data cfd WHERE cfd.client_id = '90005324' AND cfd.form_key IN ('QUESTIONNAIRE', 'CONTACT') ), show_popup_check AS ( SELECT CASE WHEN COUNT(1) = 1 THEN FALSE ELSE TRUE END AS show_popup FROM client_form_data cfd WHERE cfd.client_id = '90005324' ) SELECT sp.show_popup, CASE WHEN COUNT(1) = 2 THEN 'LINK_CARDS' WHEN COUNT(1) = 1 THEN 'CONTACT' WHEN COUNT(1) = 0 THEN 'QUESTIONNAIRE' END AS form_status FROM base b, show_popup_check sp WHERE NOT EXISTS ( SELECT 1 FROM jsonb_array_elements(b.data) AS elem WHERE elem->>'value' IS NULL OR elem->>'value' = '' ) AND jsonb_array_length(b.data) = ( CASE WHEN b.form_key = 'CONTACT' THEN 2 WHEN b.form_key = 'QUESTIONNAIRE' THEN 5 END ) GROUP BY sp.show_popup